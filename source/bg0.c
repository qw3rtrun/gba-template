#include "tonc.h"
#include "bg0.h"

#define bg0TilesLen 32
const u8 bg0Tiles[64] = {
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,

        0x31, 0x33, 0x33, 0x33,
        0x31, 0x33, 0x33, 0x33,
        0x31, 0x33, 0x33, 0x33,
        0x31, 0x33, 0x33, 0x33,
        0x31, 0x33, 0x33, 0x33,
        0x31, 0x33, 0x33, 0x33,
        0x31, 0x33, 0x33, 0x33,
        0x21, 0x22, 0x22, 0x22,
};

#define LEFT_TOP 0x1801
#define RIGHT_TOP 0x3C01
#define RIGHT_BOTTOM 0x2401
#define LEFT_BOTTOM 0x0001

#define bg0MapLen 128
const unsigned short bg0Map[128] = {
    0x1801, 0x3C01, 0x1801, 0x3C01, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,

    0x0001, 0x2401, 0x0001, 0x2401, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,

    0x1801, 0x3C01, 0x1801, 0x3C01, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,

    0x0001, 0x2401, 0x0001, 0x2401, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
};

#define bg0PalLen 64
const unsigned short bg0Pal[64] = {
        0x0,    CLR_GRAY, CLR_GRAY, CLR_SILVER,    0x0,0x0,0x0,0x0, 0x0,0x0,0x0,0x0, 0x0,0x0,0x0,0x0,
        0x0,    CLR_GRAY, CLR_WHITE, CLR_SILVER,   0x0,0x0,0x0,0x0, 0x0,0x0,0x0,0x0, 0x0,0x0,0x0,0x0,
        0x0,    CLR_WHITE, CLR_GRAY, CLR_SILVER,   0x0,0x0,0x0,0x0, 0x0,0x0,0x0,0x0, 0x0,0x0,0x0,0x0,
        0x0,    CLR_WHITE, CLR_WHITE, CLR_SILVER,  0x0,0x0,0x0,0x0, 0x0,0x0,0x0,0x0, 0x0,0x0,0x0,0x0,
        };

void bg0_draw() {
    memcpy16(&tile_mem[0], bg0Tiles, bg0TilesLen);
    memcpy16(pal_bg_mem, bg0Pal, bg0PalLen);

    u8 x0 = 6;
    u8 y0 = 1;
    for (u8 i = 0; i < 9; i++) {
        for (u8 j = 0; j < 9; j++) {
            se_mat[8][y0 + 2*i][x0 + 2*j] = LEFT_TOP;
            se_mat[8][y0 + 2*i][x0 + 2*j + 1] = RIGHT_TOP;
            se_mat[8][y0 + 2*i + 1][x0 + 2*j] = LEFT_BOTTOM;
            se_mat[8][y0 + 2*i + 1][x0 + 2*j + 1] = RIGHT_BOTTOM;
        }
    }

    se_mat[8][1][26] = LEFT_TOP;
    se_mat[8][1][27] = RIGHT_TOP;
    se_mat[8][2][26] = LEFT_BOTTOM;
    se_mat[8][2][27] = RIGHT_BOTTOM;

    se_mat[8][4][26] = LEFT_TOP;
    se_mat[8][4][27] = RIGHT_TOP;
    se_mat[8][5][26] = LEFT_BOTTOM;
    se_mat[8][5][27] = RIGHT_BOTTOM;

    se_mat[8][7][26] = LEFT_TOP;
    se_mat[8][7][27] = RIGHT_TOP;
    se_mat[8][8][26] = LEFT_BOTTOM;
    se_mat[8][8][27] = RIGHT_BOTTOM;

    REG_BG0CNT = BG_CBB(0) | BG_4BPP | BG_SBB(8) | BG_REG_32x32;
}
